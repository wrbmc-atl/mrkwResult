<Window x:Class="Views.WindowGrandPrixResultHistory"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:local="clr-namespace:Views.UserControls"
        xmlns:viewmodels="clr-namespace:ViewModels"
        mc:Ignorable="d"
        FontSize="20"
        FontFamily="07やさしさゴシック"
        Title="WindowGrandPrixResultHistory_実績見える化"
        Height="660" Width="1260"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        PreviewKeyDown="Window_PreviewKeyDown">

    <Window.Background>
        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
            <GradientStop Color="#F0F4F8" Offset="0"/>
            <GradientStop Color="#E0E8F0" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>
    <Window.Resources>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 検索条件エリア -->
        <GroupBox Grid.Row="0" Header="検索条件" Margin="5" Padding="5">
            <StackPanel Orientation="Vertical">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="レース区分:"/>
                    <ComboBox x:Name="cmbRaceKbn" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2"
                              ItemsSource="{Binding obcRaceKbnList}" 
                              SelectedItem="{Binding SelectedRaceKbn}" DisplayMemberPath="STR1"/>

                    <TextBlock Grid.Row="0" Grid.Column="4" Text="ステージ区分:"/>
                    <ComboBox x:Name="cmbStageType" Grid.Row="0" Grid.Column="5" Grid.ColumnSpan="2"
                              ItemsSource="{Binding obcStageTypeList}" 
                              SelectedItem="{Binding SelectedStageType}" DisplayMemberPath="STR1"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="出発地:"/>
                    <ComboBox x:Name="cmbStartCourse" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"
                              ItemsSource="{Binding obcStartCourseList}" 
                              SelectedItem="{Binding SelectedStartCourse}" DisplayMemberPath="COURSE_NM_DISP"/>

                    <TextBlock Grid.Row="1" Grid.Column="4" Text="目的地:"/>
                    <ComboBox x:Name="cmbGoalCourse" Grid.Row="1" Grid.Column="5" Grid.ColumnSpan="2"
                              ItemsSource="{Binding obcGoalCourseList}" 
                              SelectedItem="{Binding SelectedGoalCourse}" DisplayMemberPath="COURSE_NM_DISP"/>

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="レース日:"/>
                    <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Grid.ColumnSpan="2">
                        <local:DateUpDown Value="{Binding StartDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, StringFormat='{}{0:yyyy/MM/dd}'}"
                                         Width="150"/>
                        <TextBlock Text="～"/>
                        <local:DateUpDown Value="{Binding EndDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, StringFormat='{}{0:yyyy/MM/dd}'}"
                                         Width="150"/>
                    </StackPanel>
                </Grid>

                <Button Click="Click_Search" Grid.Row="3" Grid.Column="4" HorizontalAlignment="Right">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <iconPacks:PackIconMaterial Kind="Magnify" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBlock Text="検索" Grid.Column="1" VerticalAlignment="Center" Foreground="White"/>
                    </Grid>
                </Button>
            </StackPanel>
        </GroupBox>
        <!-- 結果一覧エリア -->
        <GroupBox Grid.Row="1" Header="一覧" Margin="5">
        <DataGrid ItemsSource="{Binding obcRaceJsskResultList}"
                  Style="{StaticResource DataGridStyle}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="レース日時" Binding="{Binding RACE_DATE, StringFormat='yyyy/MM/dd'}" Width="Auto">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="レース区分" Binding="{Binding RACE_KBN_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="ステージ区分" Binding="{Binding STAGE_TYP_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="出発地" Binding="{Binding START_NM_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="目的地" Binding="{Binding GOAL_NM_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="順位" Binding="{Binding RANK}" Width="Auto">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="参加人数" Binding="{Binding HEADCOUNT}" Width="Auto">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="終了時レート" Binding="{Binding RATE_END}" Width="Auto">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="向き" Binding="{Binding REVERSE_FLG_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="ミラー" Binding="{Binding MIRROR_FLG_DISP}" Width="Auto"/>
                <DataGridTextColumn Header="メモ" Binding="{Binding REMARK}" Width="Auto"/>
            </DataGrid.Columns>
        </DataGrid>
        </GroupBox>
    </Grid>
</Window>
